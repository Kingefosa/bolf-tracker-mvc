@model BolfTracker.Web.GamesViewModel
@{
  ViewBag.Title = String.Format("{0} {1} Games - Bolf Tracker", Model.MonthName, Model.Year);
}
<div class="page-header">
  <div class="row">
    <div class="span8">
      <h2>@String.Format("{0} {1} Games", Model.MonthName, Model.Year)</h2>
    </div>
    <div class="span8">
      @if (HttpContext.Current.User.Identity.IsAuthenticated)
      {
        @Html.ActionLink("New Game", "Create", "Game", null, new { @class = "btn primary pull-right" })
      }
    </div>
  </div>
</div>
@{
  int i = 1;
  bool needsClosingDiv = false;
}
@foreach (var item in Model.Games)
{
  if (i % 2 != 0)
  {
    needsClosingDiv = true;
    @:<div class="row"> 
  }
  var pgs = Model.GetPlayerGameStatistics(item.Id);
  <div class="span8">
    <table class="condensed-table bordered-table zebra-striped">
      <thead>
        <tr>
          <th>
            @Html.ActionLink(String.Format("{0:d}", item.Date), "Details", new { id = item.Id })
          </th>
          <th title="Points">
            Points
          </th>
          <th title="Shooting Percentage">
            Shooting %
          </th>
          <th title="Pushes">
            Pushes
          </th>
          <th title="Steals">
            Steals
          </th>
        </tr>
      </thead>
      <tbody>
        @foreach (var player in pgs)
        {
          <tr>
            <td>@Html.ActionLink(player.Player.Name, "Details", "Player", new { id = player.Player.Id, name = player.Player.UrlFriendlyName }, null)
            </td>
            <td>@player.Points
            </td>
            <td>@player.ShootingPercentage
            </td>
            <td>@player.Pushes
            </td>
            <td>@player.Steals
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
  if (i % 2 == 0)
  {
    @:</div>
    needsClosingDiv = false;
  }
  i++;
}
@if (needsClosingDiv)
{
  @:</div>
}