@model BolfTracker.Web.RankingsViewModel
@{
  ViewBag.Title = String.Format("{0} {1} Rankings - Bolf Tracker", Model.MonthName, Model.Year);
}
<div class="page-header">
  <div class="row">
    <div class="span8">
      <h2>@String.Format("{0} {1} Rankings", Model.MonthName, Model.Year)</h2>
    </div>
    <div class="span8">
      @if (HttpContext.Current.User.Identity.IsAuthenticated)
      {
        using (Html.BeginForm("Calculate", "Ranking", FormMethod.Post))
        { 
        <input type="submit" class="btn pull-right" value="Calculate Rankings" />
        }
      }
    </div>
  </div>
</div>
<h3>
  Player Rankings</h3>
<table class="bordered-table zebra-striped" id="rankings">
  <thead>
    <tr>
      <th style="width: 120px; text-align: left" title="Player">
        Player
      </th>
      <th style="width: 35px; text-align: right" title="Wins">
        W
      </th>
      <th style="width: 35px; text-align: right" title="Losses">
        L
      </th>
      <th style="width: 55px; text-align: right" title="Winning Percentage">
        PCT
      </th>
      <th style="width: 40px; text-align: right" title="Games Back">
        GB
      </th>
      <th style="width: 40px; text-align: right" title="Total Points">
        P
      </th>
      <th style="width: 40px; text-align: right" title="Points Per Game">
        PPG
      </th>
      <th style="width: 40px; text-align: right" title="Last 10 Record">
        L10
      </th>
    </tr>
  </thead>
  <tbody>
    @foreach (var ranking in Model.Rankings)
    { 
      <tr>
        <td>@Html.ActionLink(ranking.Player.Name, "Details", "Player", new { id = ranking.Player.Id, name = ranking.Player.UrlFriendlyName }, null)
        </td>
        <td style="text-align: right">@ranking.Wins
        </td>
        <td style="text-align: right">@ranking.Losses
        </td>
        <td style="text-align: right">@ranking.WinningPercentage
        </td>
        <td style="text-align: right">@ranking.GamesBack
        </td>
        <td style="text-align: right">@ranking.TotalPoints
        </td>
        <td style="text-align: right">@String.Format("{0:#.#}", ranking.PointsPerGame)
        </td>
        <td style="text-align: right">@ranking.LastTenWins-@ranking.LastTenLosses
        </td>
      </tr>
    }
  </tbody>
</table>
@if (Model.IneligibleRankings.Any())
{
  <h3>
    Ineligible Player Rankings</h3>
  <table class="bordered-table zebra-striped">
    <thead>
      <tr>
        <th style="width: 120px; text-align: left" title="Player">
          Player
        </th>
        <th style="width: 35px; text-align: right" title="Wins">
          W
        </th>
        <th style="width: 35px; text-align: right" title="Losses">
          L
        </th>
        <th style="width: 55px; text-align: right" title="Winning Percentage">
          PCT
        </th>
        <th style="width: 40px; text-align: right" title="Points">
          P
        </th>
        <th style="width: 40px; text-align: right" title="Points Per Game">
          PPG
        </th>
      </tr>
    </thead>
    <tbody>
      @foreach (var ranking in Model.IneligibleRankings)
      { 
        <tr>
          <td>@Html.ActionLink(ranking.Player.Name, "Details", "Player", new { id = ranking.Player.Id }, null)
          </td>
          <td style="text-align: right">@ranking.Wins
          </td>
          <td style="text-align: right">@ranking.Losses
          </td>
          <td style="text-align: right">@ranking.WinningPercentage
          </td>
          <td style="text-align: right">@ranking.TotalPoints
          </td>
          <td style="text-align: right">@String.Format("{0:#.#}", ranking.PointsPerGame)
          </td>
        </tr>
      }
    </tbody>
  </table>
}
@section javascript
{
  <script src="@Url.Content("~/scripts/jquery.tablesorter.js")" type="text/javascript"></script>
  <script type="text/javascript">
    $("table#rankings").tablesorter();
  </script>
}